{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","ApplicationException","NegociacaoService","constructor","_http","obterNegociacoesDaSemana","get","then","dados","map","objeto","Date","data","quantidade","valor","err","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","obterNegociacoesDoPeriodo","periodo","Promise","all","reduce","novoArray","item","concat","sort","a","b","getTime"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;AACAC,gC,+BAAAA,oB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAEIC,iB,GAAN,MAAMA,iBAAN,CAAwB;;AAE3BC,8BAAa;AACT,yBAAKC,KAAL,GAAa,IAAIL,WAAJ,EAAb;AACH;;AAEDM,2CAA0B;AACtB,2BAAO,KAAKD,KAAL,CAAWE,GAAX,CAAe,oBAAf,EAAqCC,IAArC,CAA0CC,SAC7CA,MAAMC,GAAN,CAAUC,UAAU,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CAApB,CADG,EAGPC,OAAO;AACH,8BAAM,IAAId,oBAAJ,CAAyB,uCAAzB,CAAN;AACH,qBALM,CAAP;AAMH;;AAEDe,mDAAkC;AAC9B,2BAAO,KAAKZ,KAAL,CAAWE,GAAX,CAAe,sBAAf,EAAuCC,IAAvC,CAA4CC,SAC/CA,MAAMC,GAAN,CAAUC,UAAU,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CAApB,CADG,EAGPC,OAAO;AACH,8BAAM,IAAId,oBAAJ,CAAyB,0DAAzB,CAAN;AACH,qBALM,CAAP;AAMH;;AAEDgB,oDAAmC;AAC/B,2BAAO,KAAKb,KAAL,CAAWE,GAAX,CAAe,uBAAf,EAAwCC,IAAxC,CAA6CC,SAChDA,MAAMC,GAAN,CAAUC,UAAU,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CAApB,CADG,EAGPC,OAAO;AACH,8BAAM,IAAId,oBAAJ,CAAyB,2DAAzB,CAAN;AACH,qBALM,CAAP;AAMH;;AAEKiB,yCAAN,GAAiC;AAAA;;AAAA;AAC7B,4BAAI;AACA,gCAAIC,UAAU,MAAMC,QAAQC,GAAR,CAAY,CAChC,MAAKhB,wBAAL,EADgC,EAEhC,MAAKW,gCAAL,EAFgC,EAGhC,MAAKC,iCAAL,EAHgC,CAAZ,CAApB;AAKH,mCAAOE,QAAQG,MAAR,CAAe,UAACC,SAAD,EAAYC,IAAZ;AAAA,uCAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CAArB;AAAA,6BAAf,EAA4D,EAA5D,EACHE,IADG,CACE,UAACC,CAAD,EAAIC,CAAJ;AAAA,uCAAUA,EAAEhB,IAAF,CAAOiB,OAAP,KAAmBF,EAAEf,IAAF,CAAOiB,OAAP,EAA7B;AAAA,6BADF,CAAP;AAEA,yBARD,CASA,OAAMd,GAAN,EAAW;AACP,kCAAM,IAAId,oBAAJ,CAAyB,+CAAzB,CAAN;AACH;AAZ4B;AAahC;AA9C0B,a","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negociacao } from './Negociacao.js';\nimport { ApplicationException } from '../../util/ApplicationException.js';\n\nexport class NegociacaoService {\n\n    constructor(){\n        this._http = new HttpService();\n    }\n\n    obterNegociacoesDaSemana(){\n        return this._http.get('negociacoes/semana').then(dados => \n            dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n        ,\n        err => { \n            throw new ApplicationException('Não foi possível obter as negociações'); \n        });\n    }\n\n    obterNegociacoesDaSemanaAnterior(){\n        return this._http.get('negociacoes/anterior').then(dados => \n            dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n        ,\n        err => {\n            throw new ApplicationException('Não foi possível obter as negociações da semana anterior');\n        });\n    }\n\n    obterNegociacoesDaSemanaRetrasada(){\n        return this._http.get('negociacoes/retrasada').then(dados => \n            dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n        ,\n        err => {\n            throw new ApplicationException('Não foi possível obter as negociações da semana retrasada');\n        });\n    }\n\n    async obterNegociacoesDoPeriodo(){\n        try {\n            let periodo = await Promise.all([\n            this.obterNegociacoesDaSemana(),\n            this.obterNegociacoesDaSemanaAnterior(),\n            this.obterNegociacoesDaSemanaRetrasada() \n         ]);\n         return periodo.reduce((novoArray, item) => novoArray.concat(item), [])\n            .sort((a, b) => b.data.getTime() - a.data.getTime());\n        }\n        catch(err) {\n            throw new ApplicationException('Não foi possível obter negociações do período');\n        };\n    }\n}"]}